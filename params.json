{"name":"Router","tagline":"Rack Router for Truss","body":"# Truss Router\r\n[![Build Status](https://travis-ci.org/truss-io/router.png)](https://travis-ci.org/truss-io/router)\r\n\r\nTruss Router is the first released part of Truss - a new wrapper around Rack to make writing performant Ruby web endpoints easier.\r\nTruss Router is currently considered alpha software, and as such please don't use in any production environment, but feel free to\r\nexplore and see how it handles for you.\r\n\r\nTruss supports the following Ruby platforms in Pure Ruby:\r\n\r\n* MRI 1.9.3\r\n* MRI 2.0.0\r\n* JRuby 1.7\r\n* RBX 1.9 mode\r\n\r\n## Installation\r\n\r\nAdd this line to your application's Gemfile:\r\n\r\n    gem 'truss-router'\r\n\r\nAnd then execute:\r\n\r\n    $ bundle\r\n\r\nOr install it yourself as:\r\n\r\n    $ gem install truss-router\r\n\r\n## Usage\r\n\r\nTruss Router admires Journey, although doesn't fancy doing all the hard work that it does. With that in mind, it offers a nice DSL\r\nand some pleasant features, but doesn't currently support things like namespaces or constraints. To be honest, at this 0.0.2 release\r\nit doesn't actually support much, but features will come!\r\n\r\nSo, how do I use it? Basically, just require the gem, and then ```draw``` a map of your routes. Routes are evaluated from top to bottom, so routes at the top of the route block will match and return before routes below them. The route builder takes the following arguments:\r\n\r\n1. path, e.g. \"/home\" or \"/posts/:id\"\r\n2. rack app, e.g. ```->(env){[200, {'Content-Type' => 'text/plain'}, [\"Hi, I'm a Rack App\"]]}```\r\n3. an optional hash of options (currently not used!)\r\n\r\n```ruby\r\nrequire 'truss-router'\r\n\r\nTruss::Router.draw do |r|\r\n    r.get(\"/\", HomeApp)\r\n    r.post(\"/login\", LoginApp)\r\n    r.patch(\"/update\", DhhApp)\r\n    r.delete(\"/goodbye\", RemoveThisApp)\r\n    r.get(\"/posts/:id\", PostApp) # :id is a dynamic segment\r\nend\r\n```\r\nAny valid Rack endpoint is supported as an endpoint in this map, but please be aware that Truss Router will pass a \r\nTruss::Router::Request object (a thin layer over Rack::Request) into the rack app rather than just the env hash. This \r\nallows for passing segment options and similar without too much drama.\r\n\r\nAny dynamic segments (declared by prefixing that segment with ```:```) will be passed into the application as part of the Truss\r\nRequest object, available under ```#routing_params``` for now, which is a simple hash of the segment name to the value. All keys \r\nare strings and no attempt is made to coerce values, so they are all strings as well.\r\n\r\nFinally, you can then run the Truss Router as a rack app:\r\n\r\n```ruby\r\nrun Truss::Router\r\n```\r\n\r\n## Benchmarks\r\n\r\nTruss Router aims to be a highly performant routing solution for your Rack apps, whilst giving you a nicer DSL than some of the\r\ninbuilt rack types (Cascade/URLMap), and a little bit of Rails Magic, such as param matching and simple binding of different\r\nrequest methods to different endpoints on the same path.\r\n\r\nHaving said that, there isn't much point in having candy if it makes it slow. HTTP Router inspired me to include benchmarks within\r\nthe repo that make it easy to check how performant the solution is. I'll include the current benchmark output in the wiki for each\r\nsupported platform ([1.9.3](https://github.com/truss-io/router/wiki/Benchmarks-MRI-1.9.3) / [2.0.0](https://github.com/truss-io/router/wiki/Benchmarks-MRI-2.0.0) / [JRuby1.7](https://github.com/truss-io/router/wiki/Benchmarks-JRuby) / [RBX](https://github.com/truss-io/router/wiki/Benchmarks-RBX)) and update with each release to keep things current.\r\n\r\nCurrently, 2.0.0 is by far the slowest, which is somewhat curious - I had expected it to lose to JRuby and possibly RBX but not to\r\nMRI 1.9.3, which is worth investigating.\r\n\r\n## Contributing\r\n\r\n1. Fork it\r\n2. Create your feature branch (`git checkout -b my-new-feature`)\r\n3. Commit your changes (`git commit -am 'Add some feature'`)\r\n4. Push to the branch (`git push origin my-new-feature`)\r\n5. Create new Pull Request\r\n","google":"UA-41219892-1","note":"Don't delete this file! It's used internally to help with page regeneration."}